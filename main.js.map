{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const cardTemplate = document.querySelector('#card-template').content;\n\nexport const createCard = ({ cardData, onDelete, onLikeCard, onOpenPopupData }) => {\n  const cardElement = cardTemplate.querySelector('.places__item.card').cloneNode(true);\n  const deleteButton = cardElement.querySelector('.card__delete-button');\n  const cardLikeButton = cardElement.querySelector('.card__like-button');\n  const cardImg = cardElement.querySelector('.card__image');\n  const cardTitle = cardElement.querySelector('.card__title');\n  const cardLikes = cardElement.querySelector('.card__like-counter');\n  \n  cardImg.src = cardData.link;\n  cardImg.alt = cardData.name;\n  cardTitle.textContent = cardData.name;\n  cardLikes.textContent = cardData.likes.length;\n\n  cardImg.addEventListener('click', () => {\n    onOpenPopupData(cardData.link, cardData.name);\n  });\n\n  if (cardData.owner._id !== cardData.ownerId) {\n    deleteButton.style.display = 'none';\n  }\n\n  if (cardData.likes.length > 0) {\n    (cardData.likes).forEach(like => {\n      if (like._id === cardData.ownerId) {\n        cardLikeButton.classList.add('card__like-button_is-active');\n      }\n    });\n  }\n\n  deleteButton.addEventListener('click', () => {\n    onDelete(cardData._id, cardElement);\n  });\n\n  cardLikeButton.addEventListener('click', () => {\n    onLikeCard(cardData._id, cardElement);\n  });\n  \n  return cardElement;\n}\n\nexport const displayDeleteCard = (element) => {\n    element.remove();\n}\n\nexport const displayLikeCard = (cardElement) => {\n  const cardLikeButton = cardElement.querySelector('.card__like-button');\n  cardLikeButton.classList.toggle('card__like-button_is-active');\n};\n\nexport const updateCardLikes = (cardElement, likes) => {\n  const cardLikes = cardElement.querySelector('.card__like-counter');\n  cardLikes.textContent = likes;\n};","function openPopup (popup) {\n  popup.classList.add('popup_is-opened');\n  document.addEventListener('keydown', handleEscClosePopup);  \n};\n\nfunction closePopup (popup) {\n  popup.classList.remove('popup_is-opened');\n  document.removeEventListener('keydown', handleEscClosePopup);\n  popup.querySelector('.popup__form').reset();\n};\n\nfunction handleEscClosePopup (evt) {\n  if (evt.key === 'Escape') {\n    const openedPopup = document.querySelector('.popup_is-opened');\n    closePopup(openedPopup);\n  }\n};\n\nexport { \n  openPopup, \n  closePopup\n};","const enableValidation = (validationConfig) => {\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\n  formList.forEach(formElement => {\n    formElement.addEventListener('submit', setEventListeners(formElement, validationConfig));\n  })\n};\n\nconst setEventListeners = (formElement, validationConfig) => {\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\n  inputList.forEach(inputElement => {\n    inputElement.addEventListener('input', () => {\n      checkInputValidity(formElement, inputElement, validationConfig);\n    })\n  })\n};\n\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity('');\n  }\n  if (!inputElement.validity.valid) {\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\n    toggleButtonState(inputList, buttonElement, validationConfig);\n  } else {\n    hideInputError(formElement, inputElement, validationConfig);\n    toggleButtonState(inputList, buttonElement, validationConfig);\n  }\n};\n\nconst showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.add(validationConfig.inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(validationConfig.errorClass);\n};\n\nconst hideInputError = (formElement, inputElement, validationConfig) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.remove(validationConfig.inputErrorClass);\n  errorElement.textContent = '';\n  errorElement.classList.remove(validationConfig.errorClass);\n};\n\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((inputElement) => {\n    return !inputElement.validity.valid;\n  })\n};\n\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\n    buttonElement.disabled = false;\n  }\n};\n\nconst clearValidation = (profileForm, validationConfig) => {\n  const inputList = Array.from(profileForm.querySelectorAll(validationConfig.inputSelector));\n  inputList.forEach(inputElement => {\n    hideInputError(profileForm, inputElement, validationConfig);\n  })\n  toggleButtonState(inputList, profileForm.querySelector(validationConfig.submitButtonSelector), validationConfig);\n};\n\nexport {enableValidation, clearValidation};","const config = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/wff-cohort-18',\n  headers: {\n    authorization: 'caaf307b-eb72-49d3-84fe-73df9e936b42',\n    'Content-Type': 'application/json'\n  }\n}\n\nconst handleResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n\nconst handleError = (err) => {\n  console.log(err);\n  return Promise.reject(err); // чтобы можно было обрабатывать ошибку вне функции\n};\n\nexport const getUserInfo = () => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: {\n      authorization: config.headers.authorization,\n      'Content-Type': config.headers['Content-Type']\n    }\n  })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n    })\n    .catch(err => console.log(err));\n};\n\nexport const getInitialCards = () => {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: {\n      authorization: config.headers.authorization,\n      'Content-Type': config.headers['Content-Type']\n    }\n  })\n    .then(res => {\n      if (res.ok) {\n        //console.log(res.json());\n        return res.json();\n      }\n    })\n    .catch(err => console.log(err));\n};\n\nexport const editUserInfo = (name, about) => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: 'PATCH',\n    headers: {\n      authorization: config.headers.authorization,\n      'Content-Type': config.headers['Content-Type']\n    },\n    body: JSON.stringify({\n      name,\n      about\n    })\n  })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n        //console.log(res.json());\n      }\n    })\n    .catch(err => console.log(err));\n};\n\nexport const addCard = (name, link) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: 'POST',\n    headers: {\n      authorization: config.headers.authorization,\n      'Content-Type': config.headers['Content-Type']\n    },\n    body: JSON.stringify({\n      name,\n      link\n    })\n  })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n        //console.log(res.json());\n      }\n    })\n    .catch(err => console.log(err));\n};\n\nexport const fetchDeleteCard = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\n    method: 'DELETE',\n    headers: {\n      authorization: config.headers.authorization\n    }\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nexport const putLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    method: 'PUT',\n    headers: {\n      authorization: config.headers.authorization\n    }\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nexport const deleteLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    method: 'DELETE',\n    headers: {\n      authorization: config.headers.authorization\n    }\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nexport const patchAvatar = (avatar) => {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: 'PATCH',\n    headers: {\n      authorization: config.headers.authorization,\n      'Content-Type': config.headers['Content-Type']\n    },\n    body: JSON.stringify({\n      avatar\n    })\n  })\n    .then(handleResponse)\n    .catch(handleError);\n}\n\nexport const checkImgUrl = (url) => {\n  return fetch(url, {\n    method: 'HEAD'\n  })\n    .then(res => {\n      if (res.ok && res.headers.get('content-type').startsWith('image/')) {\n        return true;\n      } else {\n        return false;\n      }\n    })\n    .catch(err => console.log(err));\n}","import './pages/index.css';\nimport { createCard, displayDeleteCard, displayLikeCard, updateCardLikes } from './components/card.js';\nimport { openPopup, closePopup } from './components/modal.js';\nimport { enableValidation, clearValidation } from './components/validation.js';\nimport { \n  getUserInfo, \n  getInitialCards, \n  editUserInfo, \n  addCard,\n  fetchDeleteCard,\n  putLike,\n  deleteLike,\n  patchAvatar,\n  checkImgUrl\n} from './components/api.js';\n\nconst cardsContainer = document.querySelector('.places__list');\nconst popups = document.querySelectorAll('.popup');\n\nconst profileButton = document.querySelector('.profile__edit-button'); \nconst profilePopup = document.querySelector('.popup_type_edit');\n\nconst newCardAddButton = document.querySelector('.profile__add-button');\nconst newCardAddPopup = document.querySelector('.popup_type_new-card');\n\nconst popupImg = document.querySelector('.popup_type_image');\nconst popupImgImage = document.querySelector('.popup__image');\nconst popupImgCaption = document.querySelector('.popup__caption');\n\nconst profileForm = document.forms['edit-profile'];\nconst profileFormNameInput = profileForm.elements['name'];\nconst profileFormJobInput = profileForm.elements['description'];\n\nconst profileName = document.querySelector('.profile__title');\nconst profileJob = document.querySelector('.profile__description');\nconst profileImg = document.querySelector('.profile__image');\n\nconst addCardForm = document.forms['new-place'];\nconst addCardFormNameInput = addCardForm.elements['place-name'];\nconst addCardFormLinkInput = addCardForm.elements['link'];\n\nconst confirmationPopup = document.querySelector('.popup_type_confirmation');\nconst confirmationForm = document.forms['delete-card-confirmation'];\n\nconst editAvatarPopup = document.querySelector('.popup_type_edit-avatar');\nconst editAvatarForm = document.forms['edit-avatar'];\nconst editAvatarFormLinkInput = editAvatarForm.elements['link'];\n\nconst validationConfig = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__button',\n  inactiveButtonClass: 'popup__button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible'\n}\n\nlet idCardForDelete = null;\nlet cardElementForDelete = null;\nlet userId = null;\n\nconst renderCard = (item, method = \"prepend\") => {\n  const cardDataConfig = {\n    onOpenPopupData: openPopupData,\n    onDelete: cardDelete,\n    onLikeCard: likeCard\n  };\n  const itemObject = {\n    cardData: item\n  }\n  const card = createCard({ ...itemObject, ...cardDataConfig });\n  cardsContainer[method](card);\n}\n\nconst handleAddCardForm = (evt) => {\n  evt.preventDefault();\n  const addCardSubmitButton = evt.submitter;\n  addCardSubmitButton.disabled = true; \n  addCardSubmitButton.textContent = 'Сохранение...';\n  addCardSubmitButton.style.cursor = 'not-allowed';\n  addCard(addCardFormNameInput.value, addCardFormLinkInput.value)\n    .then((result) => {\n      const card = renderCard({ ...result, ownerId: userId });\n      evt.target.reset();\n      closePopup(newCardAddPopup);\n      return card;\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n    .finally(() => {\n      addCardSubmitButton.disabled = false;\n      addCardSubmitButton.textContent = 'Сохранить';\n      addCardSubmitButton.style.cursor = 'pointer';\n    });\n}\n\nconst openPopupData = (link, name) => {\n  popupImgImage.src = link;\n  popupImgImage.alt = name;\n  popupImgCaption.textContent = name;\n  openPopup(popupImg);\n};\n\nconst handleProfileFormSubmit = (evt) => {\n  evt.preventDefault();\n  const profileFormButton = evt.submitter;\n  profileFormButton.disabled = true; \n  profileFormButton.style.cursor = 'not-allowed';\n  profileFormButton.textContent = 'Сохранение...';\n  editUserInfo(profileFormNameInput.value, profileFormJobInput.value)\n    .then((result) => {\n      profileName.textContent = result.name;\n      profileJob.textContent = result.about;\n      evt.target.reset();\n      closePopup(profilePopup);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally(() => {\n      profileFormButton.disabled = false; \n      profileFormButton.textContent = 'Сохранить';\n      profileFormButton.style.cursor = 'pointer';\n    });\n};\n\nconst handleEditAvatarForm = (evt) => {\n  evt.preventDefault();\n  const editAvatarSubmitButton = evt.submitter;\n  editAvatarSubmitButton.disabled = true; \n  editAvatarSubmitButton.textContent = 'Сохранение...';\n  editAvatarSubmitButton.style.cursor = 'not-allowed';\n  const imgUrl = editAvatarFormLinkInput.value;\n  checkImgUrl(imgUrl)\n    .then((isValid) => {\n      if (isValid) {\n        patchAvatar(imgUrl)\n          .then((result) => {\n            profileImg.style.backgroundImage = 'url(' + result.avatar + ')';\n            evt.target.reset();\n            clearValidation(editAvatarForm, validationConfig);\n            closePopup(editAvatarPopup);\n          })\n          .catch((err) => {\n            console.log('Ошибка в получении картинки',err);\n          });\n      } else {\n        console.log('Полученный url не является изображением');\n      }\n    })\n    .catch((err) => {\n      console.log('Ошибка в проверке юрла', err);\n    })\n    .finally(() => {\n      editAvatarSubmitButton.disabled = false; \n      editAvatarSubmitButton.textContent = 'Сохранить';\n      editAvatarSubmitButton.style.cursor = 'pointer';\n    })\n}\n\nconst cardDelete = (cardId, cardElement) => {\n  idCardForDelete = cardId;\n  cardElementForDelete = cardElement;\n  openPopup(confirmationPopup);\n};\n\nconst likeCard = (cardId, cardElement) => {\n  if (cardElement.querySelector('.card__like-button').classList.contains('card__like-button_is-active')) {\n    deleteLike(cardId)\n      .then((result) => {\n        updateCardLikes(cardElement, result.likes.length);\n        displayLikeCard(cardElement);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  } else {\n    putLike(cardId)\n    .then((result) => {\n      updateCardLikes(cardElement, result.likes.length);\n      displayLikeCard(cardElement);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n};\n\nprofileButton.addEventListener('click', () => {\n  openPopup(profilePopup);\n  clearValidation(profileForm, validationConfig);\n  profileFormNameInput.value = profileName.textContent;\n  profileFormJobInput.value = profileJob.textContent;\n});\n\nnewCardAddButton.addEventListener('click', () => {\n  openPopup(newCardAddPopup);\n  clearValidation(addCardForm, validationConfig);\n  addCardFormNameInput.value = '';\n  addCardFormLinkInput.value = '';\n});\n\nprofileImg.addEventListener('click', () => {\n  openPopup(editAvatarPopup);\n  clearValidation(editAvatarForm, validationConfig);\n  editAvatarFormLinkInput.value = '';\n});\n\npopups.forEach((popup) => {\n  popup.addEventListener('mousedown', (evt) => {\n    if (evt.target.classList.contains('popup_is-opened')) {\n      closePopup(evt.target);\n    }\n    else if (evt.target.classList.contains('popup__close')) {\n      closePopup(popup);\n    }\n  })\n});\n\nprofileForm.addEventListener('submit', handleProfileFormSubmit);\naddCardForm.addEventListener('submit', handleAddCardForm); \neditAvatarForm.addEventListener('submit', handleEditAvatarForm);\n\nenableValidation(validationConfig);\n\nPromise.all([getUserInfo(), getInitialCards()])\n  .then((results) => {\n    userId = results[0]._id;\n    console.log(results[1]);\n    profileName.textContent = results[0].name;\n    profileJob.textContent = results[0].about;\n    profileImg.style.backgroundImage = 'url(' + results[0].avatar + ')';\n    results[1].forEach(cardData => {\n      renderCard({ ...cardData, ownerId: results[0]._id});\n      idCardForDelete = cardData._id;\n    })\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\nconfirmationForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  if (idCardForDelete && cardElementForDelete) {\n    fetchDeleteCard(idCardForDelete)\n      .then((result) => {\n        if (result.message === 'Пост удалён') {\n          displayDeleteCard(cardElementForDelete);\n          idCardForDelete = null;\n          cardElementForDelete = null;\n          closePopup(confirmationPopup);\n        } else {\n          console.log(result.message);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n});"],"names":["cardTemplate","document","querySelector","content","displayLikeCard","cardElement","classList","toggle","updateCardLikes","likes","textContent","openPopup","popup","add","addEventListener","handleEscClosePopup","closePopup","remove","removeEventListener","reset","evt","key","checkInputValidity","formElement","inputElement","validationConfig","inputList","Array","from","querySelectorAll","inputSelector","buttonElement","submitButtonSelector","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","hideInputError","toggleButtonState","showInputError","validationMessage","errorElement","concat","id","inputErrorClass","errorClass","some","hasInvalidInput","inactiveButtonClass","disabled","clearValidation","profileForm","forEach","config","handleResponse","res","ok","json","Promise","reject","status","handleError","err","console","log","cardsContainer","popups","profileButton","profilePopup","newCardAddButton","newCardAddPopup","popupImg","popupImgImage","popupImgCaption","forms","profileFormNameInput","elements","profileFormJobInput","profileName","profileJob","profileImg","addCardForm","addCardFormNameInput","addCardFormLinkInput","confirmationPopup","confirmationForm","editAvatarPopup","editAvatarForm","editAvatarFormLinkInput","formSelector","idCardForDelete","cardElementForDelete","userId","renderCard","item","_ref","cardData","onDelete","onLikeCard","onOpenPopupData","deleteButton","cardLikeButton","cardImg","cardTitle","cardLikes","method","arguments","length","undefined","cardDataConfig","openPopupData","cardDelete","likeCard","card","_objectSpread","cloneNode","src","link","alt","name","owner","_id","ownerId","style","display","like","cardId","contains","fetch","headers","authorization","then","catch","deleteLike","result","putLike","value","target","preventDefault","about","profileFormButton","submitter","cursor","body","JSON","stringify","finally","addCardSubmitButton","editAvatarSubmitButton","url","imgUrl","get","startsWith","isValid","avatar","backgroundImage","setEventListeners","enableValidation","all","results","message"],"sourceRoot":""}